(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{230:function(e,t,a){e.exports=a(438)},235:function(e,t,a){},311:function(e,t,a){},438:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(4),l=a.n(c),o=a(9),i=a(2),m=a(16),u=(a(235),a(13)),s=a.n(u),p=a(22),d=a(129),E=a(62),f=a.n(E),h=a(446),b=function(e,t){var a=Math.ceil(1e4*Math.random()).toString(),n=t.method,r=void 0===n?"POST":n,c=y({url:e,method:r},{manual:!0}),l=Object(i.a)(c,2),o=l[0],m=o.data,u=o.loading,d=o.error,E=l[1],f=function(e,n){if(t.message&&t.message[e]){var r=t.message[e],c="";"string"===typeof r?c=r:"function"===typeof r&&(c=r.apply(null,(null===n||void 0===n?void 0:n.params)||[])),h.a[e]({content:c,key:a})}else(null===n||void 0===n?void 0:n.default)&&h.a[e]({content:n.default,key:a})};return[{data:m,loading:u,error:d},function(){var t=Object(p.a)(s.a.mark((function t(a){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f("loading"),t.prev=1,t.next=4,E(a);case 4:f("success"),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(1),n=t.t0.response,console.log("Error on request ".concat(r," to ").concat(e),n),f("error",{default:n.status>=500?"Server error. Try again later!":"Error processing your request.",params:[n]});case 12:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()]},g="https://microfrontend-marketplace.appspot.com/",v=Object(d.a)({axios:f.a.create({baseURL:g})}),y=Object(d.a)({axios:null}),O=Object(d.a)({axios:null}),j=function(e){var t;!function(e){var t=f.a.create({baseURL:g,headers:{Authorization:"".concat(e.token_type," ").concat(e.access_token)}});t.interceptors.response.use((function(e){return e}),(function(e){return 401===e.response.status?(localStorage.removeItem("auth"),void window.location.reload()):Promise.reject(e)})),y.configure({axios:t})}(e.api),t=e.github,O.configure({axios:f.a.create({baseURL:"https://api.github.com",headers:{Authorization:"".concat(t.token_type," ").concat(t.access_token)}})})},I=a(445),k=a(448),x=a(440),w=a(28),T=a(84),S=a(40),N=a(442),P=a(193),C=a(194),F=a(228),A=a(224),_=a(444),L=a(117),U=_.a.Title,M=function(e){Object(F.a)(a,e);var t=Object(A.a)(a);function a(){return Object(P.a)(this,a),t.apply(this,arguments)}return Object(C.a)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.children,r=e.loading;return n.createElement("section",null,n.createElement(U,{level:4},t),r?n.createElement(T.a,{justify:"center"},n.createElement(L.a,{size:"large"})):a)}}]),a}(n.Component),R=function(e){var t=e.applicationId,a=y("/microfrontends?applicationId=".concat(t)),c=Object(i.a)(a,2),l=c[0],m=l.data,u=l.loading,s=c[1];return Object(n.useEffect)((function(){s()}),[]),r.a.createElement(M,{title:"Microfrontends",loading:u},r.a.createElement(T.a,{gutter:[16,24]},m&&m.map((function(e){return r.a.createElement(S.a,{span:6,key:e.id},r.a.createElement(N.a,{title:e.name,extra:r.a.createElement(o.b,{to:"../microfrontend/".concat(e.id)},"Edit")},e.name))}))))},D=function(e){var t=e.namespaces;return n.createElement(M,{title:"Namespaces"},n.createElement(T.a,{gutter:[16,24]},t&&t.map((function(e){return n.createElement(S.a,{span:6,key:e.id},n.createElement(N.a,{title:e.name,extra:n.createElement(o.b,{to:"../namespace/".concat(e.id)},"Edit")},e.name))}))))},V=a(447),W=a(439);a(311),_.a.Title;function z(e){var t=Object(m.g)(),a=e.title,r=e.children,c=e.actions,l=e.loading,o=e.subTitle,i=e.rootPage;return n.createElement(V.a,Object.assign({className:"page",title:a,subTitle:o,extra:c},i?{}:{onBack:function(){return t.goBack()}}),n.createElement(W.a,{style:{marginTop:"0px"}}),l?n.createElement(T.a,{justify:"center"},n.createElement(L.a,{size:"large"})):r)}var B=function(e){var t=e.children,a=e.title,n=e.applicationId,c=Object(m.i)().applicationId,l=y("/applications/".concat(void 0===c?n:c)),o=Object(i.a)(l,2),u=o[0],s=u.data,p=u.loading;return u.error,o[1],r.a.createElement(z,{title:a,loading:p},!p&&t(s))},H=function(e){var t=e.application,a=b("/applications/".concat(t.id),{method:"PUT",message:{success:"Application saved"}}),c=Object(i.a)(a,2),l=c[0],u=l.data,d=l.error,E=l.loading,f=c[1],h=b("/applications/".concat(t.id,"/deploy"),{method:"POST",message:{success:"Deploy done"}}),g=Object(i.a)(h,2),v=g[0].loading,O=g[1],j=y("/namespaces?applicationId=".concat(t.id)),T=Object(i.a)(j,2),S=T[0],N=S.data,P=S.loading,C=T[1];Object(n.useEffect)((function(){C()}),[]);var F=function(){var e=Object(p.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f({data:t});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return P||!N?null:E||!u||d?r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{onFinish:F,initialValues:t},r.a.createElement(I.a.Item,{label:"Name",name:"name"},r.a.createElement(k.a,null)),r.a.createElement(I.a.Item,null,r.a.createElement(x.a,null,r.a.createElement(w.a,{type:"primary",htmlType:"submit"},"Save"),r.a.createElement(o.b,{to:"../github?applicationId=".concat(t.id)},r.a.createElement(w.a,{type:"ghost"},"New Microfrontend")),r.a.createElement(o.b,{to:"../namespace/new?applicationId=".concat(t.id)},r.a.createElement(w.a,{type:"ghost"},"New Namespace")),1===N.length?r.a.createElement(o.b,{to:"../namespace/".concat(N[0].id,"/deploy/next")},r.a.createElement(w.a,{type:"ghost"},"Prepare next deploy")):null,r.a.createElement(w.a,{type:"ghost",loading:v,onClick:function(){return O()}},"Deploy")))),N.length>1&&r.a.createElement(D,{namespaces:N}),r.a.createElement(R,{applicationId:t.id})):r.a.createElement(m.a,{to:"../application"})},q=function(){return r.a.createElement(B,{title:"Application details"},(function(e){return r.a.createElement(H,{application:e})}))},G=a(451);var J=function(){var e=y("/applications",{manual:!0}),t=Object(i.a)(e,2),a=t[0],c=a.data,l=(a.loading,a.error,t[1]);return Object(n.useEffect)((function(){l()}),[]),c?r.a.createElement(z,{title:"Applications",rootPage:!0},r.a.createElement(G.b,{itemLayout:"vertical",size:"large",dataSource:c,renderItem:function(e){return r.a.createElement(G.b.Item,{key:e.id,actions:[],extra:r.a.createElement(o.b,{to:"./application/".concat(e.id)},"Edit")},r.a.createElement(G.b.Item.Meta,{title:e.name,description:e.description}),"asd")}})):null};var K=function(){var e=Object(m.j)();return r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"".concat(e.path,"/:applicationId")},r.a.createElement(q,null)),r.a.createElement(m.b,{path:e.path},r.a.createElement(J,null)))},Y=a(37),$=a(441),Q=a(450),X=_.a.Title,Z=function(e){var t=e.microfrontend,a=!t.id,n=Object(m.g)(),c=y({url:"/microfrontends/".concat(t.id,"/sync"),method:"POST"},{manual:!0}),l=Object(i.a)(c,2),o=(l[0],l[1]),u=y("/versions?microfrontendId=".concat(t.id)),d=Object(i.a)(u,1)[0].data,E=void 0===d?[]:d,f=y({url:"/microfrontends".concat(a?"":"/".concat(t.id)),method:a?"POST":"PUT"},{manual:!0}),h=Object(i.a)(f,2),b=h[0],g=b.data,v=(b.loading,b.error,h[1]),O=function(){var e=Object(p.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v({data:Object(Y.a)({},t)});case 2:n.goBack();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=[{title:"Created at",dataIndex:"createdAt",key:"createdAt"},{title:"Name",dataIndex:"name",key:"name"},{title:"Status",dataIndex:"status",key:"status"},{title:"Action",render:function(e){return r.a.createElement("span",null,r.a.createElement(w.a,null,"Aprove"))}}],x=function(){var e=Object(p.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return g?null:r.a.createElement(z,{title:a?"Creating":"Editing ".concat(t.name)},r.a.createElement(I.a,{labelCol:{span:2},name:"basic",initialValues:t,onFinish:O,onFinishFailed:function(e){console.log("Failed:",e)}},r.a.createElement(I.a.Item,{label:"Name",name:"name"},r.a.createElement(k.a,null)),r.a.createElement(I.a.Item,{label:"Package name",name:"packageName"},r.a.createElement(k.a,null)),r.a.createElement(I.a.Item,null,r.a.createElement(w.a,{type:"primary",htmlType:"submit"},"Save"),r.a.createElement(w.a,{type:"ghost",onClick:x},"Sync Versions"))),a?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(X,null,"Versions"),r.a.createElement($.a,{columns:j,dataSource:E.map((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{key:e.id})}))}),r.a.createElement(X,null,"History"),r.a.createElement(Q.a,null,E.map((function(e){return r.a.createElement(Q.a.Item,{key:e.id,color:"green"},"Version ",e.name," created at ",e.createdAt)})))))};var ee=function(){var e=Object(m.i)().microfrontendId,t=y("/microfrontends/".concat(e)),a=Object(i.a)(t,2),n=a[0],c=n.data,l=n.loading;return n.error,a[1],l?r.a.createElement("div",null,"loading"):r.a.createElement(Z,{microfrontend:c})};var te=function(){return r.a.createElement(Z,{microfrontend:{}})};var ae=function(){var e=y("/microfrontends",{manual:!0}),t=Object(i.a)(e,2),a=t[0],c=a.data,l=(a.loading,a.error,t[1]);return Object(n.useEffect)((function(){l()}),[]),c?r.a.createElement(z,{title:"Microfrontends",rootPage:!0},r.a.createElement(G.b,{itemLayout:"vertical",size:"large",dataSource:c,renderItem:function(e){return r.a.createElement(G.b.Item,{key:e.id,actions:[],extra:r.a.createElement(o.b,{to:"./microfrontend/".concat(e.id)},"Edit")},r.a.createElement(G.b.Item.Meta,{title:e.name,description:e.description}),"asd")}})):null};var ne=function(){var e=Object(m.j)();return r.a.createElement("div",null,r.a.createElement(m.d,null,r.a.createElement(m.b,{exact:!0,path:"".concat(e.path,"/new")},r.a.createElement(te,null)),r.a.createElement(m.b,{path:"".concat(e.path,"/:microfrontendId")},r.a.createElement(ee,null)),r.a.createElement(m.b,{path:e.path},r.a.createElement(ae,null))))},re=a(46),ce=a(457),le=a(458),oe=a(459),ie=a(460),me=a(461),ue=a(227);var se=function(e){var t=e.version,a=!t.id,n=Object(m.g)(),c=y({url:"/versions".concat(a?"":"/".concat(t.id)),method:a?"POST":"PUT"},{manual:!0}),l=Object(i.a)(c,2),o=l[0],u=o.data,d=(o.loading,o.error,l[1]),E=y({url:"/versions/".concat(t.id,"/approve"),method:"PUT"},{manual:!0}),f=Object(i.a)(E,2),h=(f[0],f[1]),b=new URLSearchParams(Object(m.h)().search).get("microfrontendId"),g=function(){var e=Object(p.a)(s.a.mark((function e(t){var a,r,c,l,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.files,r=Object(ue.a)(t,["files"]),c=a.reduce((function(e,t){return t.endsWith(".css")&&e.cssFiles.push(t),t.endsWith(".js")&&e.jsFiles.push(t),e}),{jsFiles:[],cssFiles:[]}),l=c.jsFiles,o=c.cssFiles,e.next=4,d({data:Object(Y.a)(Object(Y.a)({},r),{},{files:{js:l,css:o},microfrontendId:b})});case 4:n.goBack();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(p.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u?null:r.a.createElement(N.a,{title:a?"Creating":"Editing ".concat(t.name),style:{margin:"32px"}},r.a.createElement(I.a,{labelCol:{span:2},name:"basic",onFinish:g,onFinishFailed:function(e){console.log("Failed:",e)}},r.a.createElement(I.a.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Your version name."}]},r.a.createElement(k.a,null)),t.status,r.a.createElement(I.a.Item,null,r.a.createElement(w.a,{type:"primary",htmlType:"submit"},"Save"),"NEEDS_APROVAL"===t.status&&r.a.createElement(w.a,{type:"default",onClick:v},"Approve"))))};var pe=function(){var e=Object(m.i)().versionId,t=y("/versions/".concat(e)),a=Object(i.a)(t,2),n=a[0],c=n.data,l=n.loading;return n.error,a[1],l?r.a.createElement("div",null,"loading"):r.a.createElement(se,{version:c})};var de=function(){return r.a.createElement(se,{version:{}})};var Ee=function(){var e=Object(m.j)();return r.a.createElement("div",null,r.a.createElement(m.d,null,r.a.createElement(m.b,{exact:!0,path:"".concat(e.path,"/new")},r.a.createElement(de,null)),r.a.createElement(m.b,{path:"".concat(e.path,"/:versionId")},r.a.createElement(pe,null))))},fe=a(449),he=a(124);var be=function(){return new URLSearchParams(Object(m.h)().search)};function ge(e){var t=e.application,a=Object(m.i)(),c=a.owner,l=a.repositoryName,o="".concat(c,"/").concat(l),u=I.a.useForm(),d=Object(i.a)(u,1)[0],E=Object(n.useState)("application"),f=Object(i.a)(E,2),h=f[0],g=f[1],v=!t,y=!t&&"microfrontend"===h,j=O("/repos/".concat(o)),x=Object(i.a)(j,1)[0],T=x.data,S=x.loading,N=b("/applications/import",{message:{success:"Application imported"}}),P=Object(i.a)(N,2),C=P[0],F=C.data,A=C.loading,_=P[1],L=b("/microfrontends/import",{message:{success:"Mifrofrontend imported"}}),U=Object(i.a)(L,2),M=U[0],R=M.data,D=M.loading,V=U[1],W=function(){var e=Object(p.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("application"!==a.importType){e.next=4;break}return e.next=3,_({data:{repositoryName:o,packageName:a.packageName,name:a.name}});case 3:return e.abrupt("return");case 4:return e.next=6,V({data:{repositoryName:o,applicationId:(null===t||void 0===t?void 0:t.id)||a.applicationId,packageName:a.packageName,name:a.name}});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return!A&&F?r.a.createElement(m.a,{to:"../../../application/".concat(F.id)}):!D&&R?r.a.createElement(m.a,{to:"../../../microfrontend/".concat(R.id)}):S?r.a.createElement("span",null,"loading"):r.a.createElement(I.a,{form:d,initialValues:{importType:h,name:T.name},onValuesChange:function(e){e.importType&&g(e.importType)},onFinish:W},t&&r.a.createElement(fe.a,{title:"Repository infos"},r.a.createElement(fe.a.Item,{label:"Application destiny"},t.name)),r.a.createElement(I.a.Item,{label:"Name",name:"name"},r.a.createElement(k.a,null)),r.a.createElement(I.a.Item,{label:"Package name",name:"packageName"},r.a.createElement(k.a,null)),v&&r.a.createElement(I.a.Item,{label:"Import type",name:"importType"},r.a.createElement(he.default.Group,{value:h},r.a.createElement(he.default.Button,{value:"application"},"Application"),r.a.createElement(he.default.Button,{value:"microfrontend"},"Microfrontend"))),y&&r.a.createElement(I.a.Item,{label:"Application Id",name:"applicationId"},r.a.createElement(k.a,null)),r.a.createElement("div",null,r.a.createElement(w.a,{htmlType:"submit",type:"primary",disabled:A||D},"Import")))}var ve=function(){var e=be().get("applicationId");return e?r.a.createElement(B,{title:"Import repository",applicationId:e},(function(e){return r.a.createElement(ge,{application:e})})):r.a.createElement(z,{title:"Import repository"},r.a.createElement(ge,null))},ye=a(208),Oe=a(452),je=a(453),Ie=a(454),ke=a(455),xe=function(e){var t=e.icon,a=e.text;return r.a.createElement("span",null,r.a.createElement(t,{style:{marginRight:8}}),a)},we=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],l=O("/user/repos?type=owner"),m=Object(i.a)(l,2),u=m[0],s=u.data,p=u.loading,d=(m[1],be()),E=function(e){var t="./github/import/".concat(e.full_name);return d.get("applicationId")&&(t+="?applicationId=".concat(d.get("applicationId"))),t};return r.a.createElement(z,{title:"Github Repositories",rootPage:!0},r.a.createElement(k.a,{size:"large",placeholder:"Search",prefix:r.a.createElement(Oe.a,null),value:a,onChange:function(e){return c(e.target.value)}}),r.a.createElement(G.b,{itemLayout:"vertical",size:"large",loading:p,dataSource:(s||[]).filter((function(e){return e.name.indexOf(a)>-1})),renderItem:function(e){return r.a.createElement(G.b.Item,{key:e.id,actions:[r.a.createElement(xe,{icon:je.a,text:e.stargazers_count,key:"list-vertical-star-o"}),r.a.createElement(xe,{icon:Ie.a,text:e.open_issues,key:"list-vertical-message"})],extra:r.a.createElement(o.b,{to:E(e)},"Import")},r.a.createElement(G.b.Item.Meta,{avatar:r.a.createElement(ye.a,{icon:r.a.createElement(ke.a,null)}),title:e.name,description:e.description}),"asd")}}))};var Te=function(){var e=Object(m.j)();return r.a.createElement(m.d,null,r.a.createElement(m.b,{exact:!0,path:"".concat(e.path)},r.a.createElement(we,null)),r.a.createElement(m.b,{path:"".concat(e.path,"/import/:owner/:repositoryName")},r.a.createElement(ve,null)))};var Se=function(){var e=y("/users/me"),t=Object(i.a)(e,2),a=t[0],n=a.data,c=a.loading,l=(a.error,t[1],b("/users/me",{method:"put",message:{success:"User saved"}})),m=Object(i.a)(l,2),u=m[0].loading,d=m[1],E=function(){var e=Object(p.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d({data:{githubToken:t.githubToken}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(z,{title:"Profile"},c?r.a.createElement(L.a,{size:"large"}):r.a.createElement(I.a,{name:"basic",initialValues:n,onFinish:E},r.a.createElement(I.a.Item,{label:"Github Token",name:"githubToken"},r.a.createElement(k.a,null)),r.a.createElement(I.a.Item,null,r.a.createElement(x.a,null,r.a.createElement(w.a,{type:"primary",htmlType:"submit",loading:u},"Save"),r.a.createElement(o.b,{to:"/logout"},r.a.createElement(w.a,{type:"ghost"},"Logout"))))))},Ne=a(443),Pe=a(68),Ce=a(456),Fe=function(e){var t=e.namespaceId,a=y("/namespaces/".concat(t,"/history")),r=Object(i.a)(a,1)[0],c=r.data,l=r.loading;return n.createElement(M,{title:"Deploys",loading:l},n.createElement(Q.a,null,c&&c.deploys.map((function(e){return n.createElement(Q.a.Item,{color:"green"},"Deploy ",e.id," created at ",e.createdAt)}))))};var Ae=function(e){var t=e.children,a=e.title,n=e.namespaceId,c=Object(m.i)().namespaceId,l=y("/namespaces/".concat(void 0===c?n:c)),o=Object(i.a)(l,1)[0],u=o.data,s=o.loading;return o.error,s?null:a?r.a.createElement(z,{title:a,loading:s},!s&&t(u)):t(u)},_e=Ne.a.confirm,Le=function(e){return function(){_e({title:"Are you sure delete this namespace?",icon:r.a.createElement(Ce.a,null),content:"This action cannot be undone",okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){e()}})}},Ue=function(e){var t=e.namespace,a=!t.id,n=b("/namespaces".concat(a?"":"/".concat(t.id)),{method:a?"POST":"PUT",message:{success:"Namespace saved"}}),c=Object(i.a)(n,2),l=c[0],u=l.data,d=l.error,E=l.loading,f=c[1],h=b("/namespaces/".concat(t.id),{method:"DELETE",message:{success:"Namespace deleted"}}),g=Object(i.a)(h,2),v=g[0],y=v.data,O=v.error,j=v.loading,T=g[1],S=function(){var e=Object(p.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(Object(Y.a)(Object(Y.a)({},t),{},{data:Object(Y.a)(Object(Y.a)({},t),a)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(!E&&u&&!d||!j&&y&&!O)return r.a.createElement(m.a,{to:"../application/".concat(t.applicationId)});var N=r.a.createElement(w.a,{type:"dashed",onClick:Le(T),loading:j,disabled:t.isMain},"Delete");return r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{onFinish:S,initialValues:t},r.a.createElement(I.a.Item,{label:"Name",name:"name"},r.a.createElement(k.a,null)),r.a.createElement(I.a.Item,{label:"Url path",name:"path"},r.a.createElement(k.a,null)),r.a.createElement(I.a.Item,null,r.a.createElement(x.a,null,r.a.createElement(w.a,{type:"primary",htmlType:"submit"},"Save"),!a&&(t.isMain?r.a.createElement(Pe.a,{placement:"topLeft",title:"Cannot delete main namespace"},N):N),!a&&r.a.createElement(o.b,{to:"./".concat(t.id,"/deploy/next")},r.a.createElement(w.a,{type:"ghost"},"Update next deploy")))),!a&&r.a.createElement(Fe,{namespaceId:t.id})))},Me=function(){return r.a.createElement(Ae,{title:"Namespace details"},(function(e){return r.a.createElement(Ue,{namespace:e})}))},Re=function(){var e=be().get("applicationId");return r.a.createElement(z,{title:"New namespace"},r.a.createElement(Ue,{namespace:{applicationId:e}}))},De=a(95);function Ve(e){var t=e.microfrontend,a=y("/versions?microfrontendId=".concat(t.id)),n=Object(i.a)(a,1)[0],c=n.data,l=n.loading;n.error;return l?r.a.createElement("span",null,"loading"):r.a.createElement(I.a.Item,{label:t.name,name:t.id,required:!0},r.a.createElement(De.a,null,c.map((function(e){return r.a.createElement(De.a.Option,{key:e.id,value:e.id},e.name)}))))}function We(e){var t=e.namespace,a=y("/namespaces/".concat(t.id,"/deploy/next")),n=Object(i.a)(a,1)[0],c=n.data,l=n.loading,o=y("/microfrontends?applicationId=".concat(t.applicationId)),m=Object(i.a)(o,1)[0].data,u=b("/namespaces/".concat(t.id,"/deploy/next"),{method:"PUT",message:{success:"Next deploy saved"}}),d=Object(i.a)(u,2),E=d[0].loading,f=d[1],h=function(){var e=Object(p.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f({data:{versions:t}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l?null:r.a.createElement(z,{title:"Configure next deploy in namespace ".concat(t.name)},r.a.createElement(I.a,{name:"basic",onFinish:h,initialValues:c.versions},m&&m.map((function(e){return r.a.createElement(Ve,{key:e.id,microfrontend:e})})),r.a.createElement(I.a.Item,null,r.a.createElement(x.a,null,r.a.createElement(w.a,{type:"primary",htmlType:"submit",loading:E},"Save")))))}var ze=function(){return r.a.createElement(Ae,null,(function(e){return r.a.createElement(We,{namespace:e})}))};var Be=function(){var e=Object(m.j)();return r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"".concat(e.path,"/new")},r.a.createElement(Re,null)),r.a.createElement(m.b,{path:"".concat(e.path,"/:namespaceId/deploy/next")},r.a.createElement(ze,null)),r.a.createElement(m.b,{path:"".concat(e.path,"/:namespaceId")},r.a.createElement(Me,null)))};function He(){return r.a.createElement("div",null,"Home")}function qe(){var e=Object(m.j)(),t=Object(m.g)(),a=[{label:"Home",icon:ce.a,rootComponent:He,url:"/"},{label:"Repositories",icon:le.a,rootComponent:Te,url:"/github"},{label:"Applications",icon:oe.a,rootComponent:K,url:"/application"},{label:"Microfrontends",icon:ie.a,rootComponent:ne,url:"/microfrontend"},{label:"Profile",icon:me.a,rootComponent:Se,url:"/profile"},{rootComponent:Be,url:"/namespaces"}],n=Object.assign([],a);n.reverse();var c=n.length-n.findIndex((function(a){return t.location.pathname.replace(e.path,"").startsWith(a.url)}))-1;return r.a.createElement(r.a.Fragment,null,r.a.createElement(re.a,{style:{minWidth:256},selectedKeys:[c.toString()],mode:"vertical",theme:"dark"},a.filter((function(e){return e.label&&e.icon})).map((function(t,a){return r.a.createElement(re.a.Item,{key:a},r.a.createElement(o.b,{to:"".concat(e.path).concat(t.url)},t.icon&&r.a.createElement(t.icon,null),t.label))}))),r.a.createElement("main",{className:"App__container"},r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"".concat(e.path,"/application")},r.a.createElement(K,null)),r.a.createElement(m.b,{path:"".concat(e.path,"/namespace")},r.a.createElement(Be,null)),r.a.createElement(m.b,{path:"".concat(e.path,"/microfrontend")},r.a.createElement(ne,null)),r.a.createElement(m.b,{path:"".concat(e.path,"/version")},r.a.createElement(Ee,null)),r.a.createElement(m.b,{path:"".concat(e.path,"/github")},r.a.createElement(Te,null)),r.a.createElement(m.b,{path:"".concat(e.path,"/profile")},r.a.createElement(Se,null)),r.a.createElement(m.b,{path:"".concat(e.path,"/")},"HOME"))))}var Ge=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(qe,null))};var Je=function(e){var t=e.handleLogin,a=e.handleError,c=new URLSearchParams(Object(m.h)().search).get("code"),l=v({url:"/oauth/github?code=".concat(c),method:"POST"}),o=Object(i.a)(l,2),u=o[0],s=u.data,p=(u.loading,u.error);return o[1],Object(n.useEffect)((function(){s?t(s):p&&a()})),r.a.createElement("div",null,"Loading")};var Ke=function(e,t){var a=Object(n.useState)((function(){try{var a=JSON.parse(window.localStorage.getItem(e)||"");return a||t}catch(n){return console.log(n),t}})),r=Object(i.a)(a,2),c=r[0],l=r[1];return[c,function(t){try{l(t),window.localStorage.setItem(e,JSON.stringify(t))}catch(a){console.log(a)}},function(){l(void 0),window.localStorage.removeItem(e)}]},Ye=function(){var e=Ke("auth"),t=Object(i.a)(e,3),a=t[0],n=t[1];return[a,function(e){j(e),n(e)},t[2]]};var $e=function(){var e=Ye(),t=Object(i.a)(e,3),a=t[0],n=(t[1],t[2]);return a?(n(),r.a.createElement(r.a.Fragment,null)):(window.location.href="/",r.a.createElement(r.a.Fragment,null))};var Qe=function(){return r.a.createElement("div",null,r.a.createElement("a",{href:"https://github.com/login/oauth/authorize?client_id=".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/create-micro-react-app/app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_GITHUB_CLIENT_ID,"&redirect_uri=http://localhost:3000/login")},"login with github"))};var Xe=function(){var e=Object(m.g)(),t=Ye(),a=Object(i.a)(t,2),n=a[0],c=a[1];return n&&j(n),e.location.pathname.startsWith("/logout")?r.a.createElement($e,null):!e.location.pathname.startsWith("/home")&&n?r.a.createElement(m.a,{to:"/home"}):e.location.pathname.startsWith("/home")&&!n?r.a.createElement(m.a,{to:"/"}):r.a.createElement(m.d,null,r.a.createElement(m.b,{exact:!0,path:"/"},r.a.createElement(Qe,null)),r.a.createElement(m.b,{path:"/login"},r.a.createElement(Je,{handleLogin:c,handleError:function(){return e.push("/")}})),r.a.createElement(m.b,{path:"/home"},r.a.createElement(Ge,null)))};var Ze=function(){return r.a.createElement(o.a,null,r.a.createElement(Xe,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Ze,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[230,1,2]]]);
//# sourceMappingURL=main.b015ae9d.chunk.js.map